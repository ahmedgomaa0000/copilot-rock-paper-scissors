name: Capture Logs on Failure

on:
  workflow_run:
    workflows: ["CI"]
    types:
      - completed

jobs:
  send-logs-on-failure:
    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    runs-on: ubuntu-latest
    steps:
      - name: Download logs
        run: |
          gh run download ${{ github.event.workflow_run.id }} -D logs/
      - name: Send logs to webhook
        run: |
          curl -X POST -H "Content-Type: application/json" \
          -d @logs/summary.json https://your-webhook-url
